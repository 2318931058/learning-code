<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        * {
            padding: 0;
            margin: 0;
        }

        .inputSearch {
            width: 600px;
            margin: 30px auto 0px auto;
        }

        input {
            height: 20px;
            margin-right: 15px;
            border-radius: 5px;
            padding: 5px 10px;
        }

        button {
            color: whitesmoke;
            width: 80px;
            height: 40px;
            border-radius: 5px;
            background-color: skyblue;
        }

        button:hover {
            color: white;
            font-weight: bold;
            cursor: pointer;
        }

        table {
            margin: 50px 0px 0px 450px;
            border: 1px solid black;
            border-collapse: collapse;
        }

        th,
        td {
            width: 150px;
            height: 40px;
            text-align: center;
            border: 1px solid black;
        }

        .delItem:hover {
            font-weight: bold;
            cursor: pointer;
        }

        .red {
            color: red;
        }
    </style>
</head>

<body>
    <div id="app">
        <div class="inputSearch">
            <label for="subject">科目：</label>
            <input id="subject" type="text" placeholder="请输入科目" v-model.trim="subject">
            <label for="score">分数：</label>
            <input id="score" type="text" placeholder="请输入分数" v-model.number="score">
            <button @click="addItem()">添加</button>
        </div>

        <table>
            <tr>
                <th>编号</th>
                <th>科目</th>
                <th>成绩</th>
                <th>操作</th>
            </tr>

            <tr v-for="(item,index) in list" :key="item.id">
                <td>{{index+1}}</td>
                <td>{{item.subject}}</td>
                <td :class="{red:item.score<=60}">{{item.score}}</td>
                <td class="delItem" @click="delItem(item.id)">删除</td>
            </tr>

            <tr v-if="list.length">
                <td colspan="4">总分：{{totalScore}} <span style="margin-left: 40px;">平均分：{{averageScore}}</span></td>
            </tr>

            <tr v-else>
                <td colspan="4">暂无数据</td>
            </tr>
        </table>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>

    <script>
        const app = new Vue({
            el: '#app',
            data: {
                subject: '',
                score: '',
                list: [
                    { id: 1, 'subject': '语文', 'score': 46 },
                    { id: 2, 'subject': '数学', 'score': 80 },
                    { id: 3, 'subject': '英语', 'score': 100 },
                ]
            },
            methods: {
                addItem() {
                    if (!this.score || !this.subject) {
                        this.subject = ''
                        this.score = ''
                        return alert('请输入科目和成绩')
                    }
                    if (typeof (this.score) != 'number') {
                        this.score = ''
                        return alert('请输入正确的成绩')
                    }
                    for (let i = 0; i < this.list.length; i++) {
                        if (this.list[i].subject == this.subject) {
                            this.subject = ''
                            this.score = ''
                            return alert('输入的科目已存在')
                        }
                    }
                    let scoreInfo = { id: Date.now(), 'subject': `${this.subject}`, 'score': this.score }
                    this.list.push(scoreInfo)
                    this.subject = ''
                    this.score = ''

                },
                delItem(id) {
                    this.list.forEach(items => {
                        if (items.id == id) {
                            return this.list = this.list.filter(item => item.id != id)
                        }
                    })
                }
            },
            computed: {
                totalScore() {
                    return this.list.reduce((sum, item) => sum += item.score, 0)
                },
                averageScore() {
                    if (!this.list.length) return 0
                    return (this.totalScore / this.list.length).toFixed(2)
                }
            }
        })
    </script>
</body>

</html>