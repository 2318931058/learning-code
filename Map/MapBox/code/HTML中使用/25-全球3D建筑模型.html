<!DOCTYPE html>
<html lang="en">

<head>
      <meta charset="UTF-8" />
      <meta http-equiv="X-UA-Compatible" content="IE=edge" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <title>Document</title>
      <script src="https://lib.baomitu.com/jquery/2.2.4/jquery.js"></script>
      <script src="https://api.mapbox.com/mapbox-gl-js/v2.12.0/mapbox-gl.js"></script>
      <link href="https://api.mapbox.com/mapbox-gl-js/v2.12.0/mapbox-gl.css" rel="stylesheet" />
</head>

<body>
    <div id='map' style='width: 100vw; height: 100vh;'></div>
      <script>
            mapboxgl.accessToken =
                  "pk.eyJ1IjoiY2hlbmdjaGFvY2hhbyIsImEiOiJjbGU1aDZ2eWUwMXp4M29udmFnNnNyZjBhIn0.2Kd0ZX06ReEdBnZ9XU4XUA";
            const map = new mapboxgl.Map({
                  container: "map", 
                  style: "mapbox://styles/mapbox/streets-v12", 
                  center: [114.40, 30.465],
                  zoom: 16,
                  pitch: 45,
                  projection: "globe",
            });
            map.on("click", (evt) => {
                  console.log(evt)
            })
            map.on("load", () => {
                  map.addLayer({
                        id: "3d-buildings",
                        source: "composite",
                        "source-layer": "building",
                        filter: ["==", "extrude", "true"],
                        // fill-extrusion是可以给图层设置高度的样式类型
                        type: "fill-extrusion",
                        paint: {
                            // 根据不同字段设置不同颜色
                              'fill-extrusion-color': [
                                    'interpolate',
                                    ['linear'],
                                    ['get', 'height'],
                                    //不同高度设置不同颜色
                                    0, '#EED322',
                                    50, '#A67FB5',
                                    75, '#C997C7',
                                    100, '#DEB8D4',
                                    250, '#CA8323'
                              ],

                              "fill-extrusion-height": [
                                    "interpolate",
                                    ["linear"],
                                    ["zoom"],
                                    1,
                                    0,
                                    8,
                                    ["get", "height"],
                              ],

                              "fill-extrusion-base": [
                                    "interpolate",
                                    ["linear"],
                                    ["zoom"],
                                    1,
                                    0,
                                    8,
                                    ["get", "min_height"],
                              ],
                              "fill-extrusion-opacity": 0.6,
                        },

                  });
            });
      </script>
</body>

</html>